<script type="text/ng-template" id="createTest.html">
    <form action="" name="CreateTestForm" method="POST">

        <div class="FormRow">
            <action-global-error></action-global-error>
        </div>

        <div class="FormRow">
            <label for="test_name" class="FormRow--label  BasicLabel">Test name</label>
            <input type="text" name="test_name" class="FormRow--field  BasicField" ng-model="test.test_name" required/>

            <div class="FormError  BasicError  CreateUserError" ng-show="theForm.notExists('test_name')">
                <p>Test name has to be provided</p>
            </div>
        </div>

        <div class="FormRow">
            <label for="test_name" class="FormRow--label  BasicLabel">Permission</label>
            <select ng-model="test.current_permission" ng-options="permission for permission in test.permission_items" class="BasicSelect"></select>
        </div>

        <div class="FormRow">

            <div class="FormError  BasicError  CreateUserError"
                 ng-show="test.current_permission == 'restricted' && theForm.notEmpty(test.allowed_users)">
                <p>If restriction is not public, and no users are provided, restriction is automaticlly going to be public</p>
            </div>

            <div class="TestRestrictions" ng-show="test.current_permission == 'restricted'">
                <div class="UserTable  UserListTable">
                    <label class="ListTable--label" ng-click="managment.addUser(user)" ng-repeat="user in available_users">{[{ user.username }]}</label>
                </div>

                <div class="UserTable  UserAllowedTable">
                    <label class="ListTable--label" ng-click="managment.removeUser(user)" ng-repeat="user in test.allowed_users">{[{ user.username }]}</label>
                </div>
            </div>

        </div>

        <div class="FormRow">
            <label for="future_plans" class="FormRow--label  BasicLabel">Remarks</label>
            <textarea name="remarks" class="FormRow--field  BasicField  BasicTextarea" ng-model="test.remarks"></textarea>
        </div>

        <div class="FormRow  ActionArea">
            <action-submit init-key="action-create-test"></action-submit>
        </div>
    </form>

</script>
